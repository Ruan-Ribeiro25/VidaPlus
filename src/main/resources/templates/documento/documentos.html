<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Centro de Resultados - SpeedMedical</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        .page-header-premium { text-align: center; margin-bottom: 40px; padding: 20px; background: white; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .doc-group-container { background: white; border-radius: 15px; padding: 30px; margin-bottom: 30px; border-left: 6px solid #20c997; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        .group-header { display: flex; align-items: center; gap: 20px; margin-bottom: 25px; border-bottom: 2px solid #f8f9fa; padding-bottom: 15px; }
        .group-header i { font-size: 1.5rem; color: #20c997; background: #e6fffa; padding: 15px; border-radius: 50%; }
        .group-info h3 { margin: 0; color: #333; font-size: 1.25rem; text-align: left; }
        .group-info span { font-size: 0.9rem; color: #888; }
        .files-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; }
        .file-card { border: 1px solid #f1f3f5; border-radius: 12px; padding: 20px; text-align: center; background: #ffffff; transition: all 0.3s ease; position: relative; }
        .file-card:hover { transform: translateY(-5px); border-color: #20c997; box-shadow: 0 8px 25px rgba(32, 201, 151, 0.15); }
        .file-icon { font-size: 2.8rem; margin-bottom: 15px; }
        .icon-pdf { color: #e74c3c; }
        .icon-img { color: #3498db; }
        .file-name { font-size: 0.9rem; font-weight: 700; color: #444; margin-bottom: 15px; height: 40px; overflow: hidden; }
        .btn-download-premium { display: block; width: 100%; padding: 10px; background: #20c997; color: white; border-radius: 8px; text-decoration: none; font-size: 0.85rem; font-weight: bold; transition: 0.2s; }
        .btn-download-premium:hover { background: #17a589; }
    </style>
</head>
<body>
    <nav>
        <h1>SpeedMedical</h1>
        <div class="user-info">
            <a th:href="@{/home}" class="btn-sair">Voltar ao Início</a>
            Olá, <span th:text="${usuario.nome}">Usuário</span>
        </div>
    </nav>
    <main>
        <div class="page-header-premium">
            <h2 style="color: #20c997; margin-bottom: 10px;">Centro de Resultados</h2>
            <p style="color: #666;">Documentos médicos disponibilizados pelos seus profissionais de saúde.</p>
        </div>

        <div th:each="entry : ${documentosMap}" class="doc-group-container">
            <div class="group-header">
                <i class="fas fa-stethoscope"></i>
                <div class="group-info">
                    <h3 th:text="${entry.key}">Consulta - Profissional (Data)</h3>
                    <span>Exames e Laudos deste atendimento</span>
                </div>
            </div>
            <div class="files-grid">
                <div th:each="doc : ${entry.value}" class="file-card">
                    <div class="file-icon">
                        <i th:if="${#strings.contains(doc.tipoArquivo, 'pdf')}" class="fas fa-file-pdf icon-pdf"></i>
                        <i th:if="${#strings.contains(doc.tipoArquivo, 'image')}" class="fas fa-file-image icon-img"></i>
                        <i th:unless="${#strings.contains(doc.tipoArquivo, 'pdf') or #strings.contains(doc.tipoArquivo, 'image')}" class="fas fa-file-medical icon-doc"></i>
                    </div>
                    <div class="file-name" th:text="${doc.nomeArquivo}">Nome.pdf</div>
                    <a th:href="@{/documentos/download/{id}(id=${doc.id})}" class="btn-download-premium">Download</a>
                </div>
            </div>
        </div>
    </main>
</body>
</html>